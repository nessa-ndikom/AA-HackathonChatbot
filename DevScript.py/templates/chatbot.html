<!DOCTYPE html>
<!-- Coding By CodingNepal - www.codingnepalweb.com -->
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <title>Chatbot in JavaScript | CodingNepal</title>
    <link rel="shortcut icon" href="../images/logo-top.png">

    <link rel="stylesheet" href=".chatbot.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google Fonts Link For Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0" />
    <!-- <script src="script.js" defer></script> -->
</head>
<body>
    <button class="chatbot-toggler">
        <span class="material-symbols-rounded">mode_comment</span>
        <span class="material-symbols-outlined">close</span>
    </button>
    <div class="chatbot">
    <header>
        <h2>Chatbot</h2>
        <span class="close-btn material-symbols-outlined">close</span>
    </header>
        <ul class="chatbox">
            <li class="chat incoming">
            <span class="material-symbols-outlined">smart_toy</span>
            <p>Hi there ðŸ‘‹<br>How can I help you today?</p>
        </li>
        </ul>
        <div class="chat-input">
        <textarea placeholder="Enter a message..." spellcheck="false" required></textarea>
        <span id="send-btn" class="material-symbols-rounded">send</span>
        </div>
    </div>

    <button class="btn btn-2 px-5 py-2 me-5" type="submit" onclick="window.location.href='../index.html'">HomePage</button>

    <!-- testD.js -->
    <script>
        // Function to handle user input and send AJAX request
        function sendMessage() {
            const userQuery = document.getElementById("user-input").value;
            const chatbox = document.getElementById("chat-messages");

            // Append user query to chatbox
            const userMessage = document.createElement("p");
            userMessage.innerHTML = "You: " + userQuery;
            chatbox.appendChild(userMessage);

            // AJAX request to Flask backend
            fetch('/get_response', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ 'user_query': userQuery })
            })
            .then(response => response.json())
            .then(data => {
                // Append chatbot response to chatbox
                const chatbotMessage = document.createElement("p");
                chatbotMessage.innerHTML = "Chatbot: " + data['chatbot_response'];
                chatbox.appendChild(chatbotMessage);
            })
            .catch(error => console.error('Error:', error));

            // Clear user input field
            document.getElementById("user-input").value = "";
        }

        // Trigger sendMessage function on user input (e.g., Enter key press)
        document.getElementById("user-input").addEventListener("keydown", function(event) {
            if (event.key === "Enter") {
                sendMessage();
            }
        });
    </script>

    <!-- <script src="C:\Users\HP\Documents\AA-HackathonChatbot\DevScript.py\static\chatbot.js"></script> ../chatbot.js -->
</body>
</html>
